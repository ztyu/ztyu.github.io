<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>idiot-yu</title>
  <meta name="author" content="idiot-yu">
  
  <meta name="description" content="java python hexo">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="idiot-yu"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link rel="alternate" href="/atom.xml" title="idiot-yu" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <!-- wumiiVerification -->
  <meta name="wumiiVerification" content="fb50a101-84fe-4ca2-91a7-ae8cf792978b" />
  <meta name="wumiiVerification" content="d73b5866-c390-4156-a4dd-51b526b5335e" />
  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!-- Font-Awesome -->
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">

</head>

<body>
  <header id="header"><div class= "header-content inner">
	<div class = "alignleft col-one">
		
			<div class='avatar'>
				<img src = "/img/default/avatar.png">
              </div>
		
		<div class="header-div">
		    <h1><a href="/">idiot-yu</a></h1>
		    <h2><a href="/">Time never returns</a></h2>
		</div>
	</div>
	<div class = "alignright col-two">
		
	</div>
	<div class="clearfix"></div>
</div>

<div class= "header-nav">
	<div class='header-nav-content inner'>
		<div id="main-nav" class="alignleft">
		    		
		    		  <a href="/"><i class="fa fa-home"></i>Home</a>
		    		
		    		  <a href="/archives"><i class="fa fa-archive"></i>Archives</a>
		    		
		</div>
		<div id="sub-nav" class="alignright">
		    
		      <a href="/about"><i class="fa fa-user"></i>About</a>
		    
		</div>
	</div>
	<div class="clearfix"></div>
</div>
</header>
  
    <div id="content" class="inner">
      <div id="main-col" class="alignleft"><div id="wrapper">
    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2018-02-22T02:57:07.000Z"><a href="/2018/02/22/design-mode/">2018-02-22</a></time>
        
  
    <h1 class="title"><a href="/2018/02/22/design-mode/">设计模式</a></h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        
    </div>

        <font color="#555" face="PingFang SC" size="4"><br><br>  <a href="http://www.cnblogs.com/zuoxiaolong/category/509144.html" target="_blank" rel="noopener">http://www.cnblogs.com/zuoxiaolong/category/509144.html</a><br></font>



      
    </div>
    <footer>
      
        
        
        <div class="alignright">
          <a href="/2018/02/22/design-mode/#comment" class="comment-link">Comments</a>
        </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2018-02-09T08:15:28.000Z"><a href="/2018/02/09/dispersed/">2018-02-09</a></time>
        
  
    <h1 class="title"><a href="/2018/02/09/dispersed/">架构</a></h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        
    </div>

        <font color="#555" face="PingFang SC" size="4"><br><br>    分表设计好分表策略 取模分表数量 查询时候 再次通过id取模来确定查询的表<br>    1.  中间变量 = 262145 % (256 * 1024) = 1<br>    2.  库 = 取整 (1/1024) = 0<br>    3.  表 = 1 % 1024 = 1<br>    <a href="http://blog.csdn.net/winy_lm/article/details/50708493" target="_blank" rel="noopener">http://blog.csdn.net/winy_lm/article/details/50708493</a><br><br>    电商　秒杀系统　设计思路和实现方法<br>    <a href="http://blog.csdn.net/bigtree_3721/article/details/72760538" target="_blank" rel="noopener">http://blog.csdn.net/bigtree_3721/article/details/72760538</a><br>    链接<br>    <a href="https://mp.weixin.qq.com/s/NNvUsetAGSDZNGfVW933Xg" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/NNvUsetAGSDZNGfVW933Xg</a><br></font>

      
    </div>
    <footer>
      
        
        
        <div class="alignright">
          <a href="/2018/02/09/dispersed/#comment" class="comment-link">Comments</a>
        </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2018-02-09T07:50:50.000Z"><a href="/2018/02/09/concurrency-first/">2018-02-09</a></time>
        
  
    <h1 class="title"><a href="/2018/02/09/concurrency-first/">线程 一</a></h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        
    </div>

        <font color="#555" face="PingFang SC" size="4"><br>    <img src="/img/default/J.U.C.png"><br><br><br>    synchronized关键字来实现同步的话，就会导致一个问题：<br>　　如果多个线程都只是进行读操作，所以当一个线程在进行读操作时，其他线程只能等待无法进行读操作。<br>　　因此就需要一种机制来使得多个线程都只是进行读操作时，线程之间不会发生冲突，通过Lock就可以办到。使用 ReentrantLock<br>    <a href="https://www.cnblogs.com/baizhanshi/p/6419268.html" target="_blank" rel="noopener">https://www.cnblogs.com/baizhanshi/p/6419268.html</a><br><br>    链接<br><a href="http://ifeve.com/concurrent-study/" target="_blank" rel="noopener">http://ifeve.com/concurrent-study/</a><br><a href="http://www.blogjava.net/xylz/archive/2010/07/08/325587.html" target="_blank" rel="noopener">http://www.blogjava.net/xylz/archive/2010/07/08/325587.html</a><br><a href="http://www.cnblogs.com/jobs/archive/2010/07/29/1788156.html" target="_blank" rel="noopener">http://www.cnblogs.com/jobs/archive/2010/07/29/1788156.html</a><br>    线程<br><a href="http://blog.csdn.net/ghsau/article/category/1707779" target="_blank" rel="noopener">http://blog.csdn.net/ghsau/article/category/1707779</a><br></font>

      
    </div>
    <footer>
      
        
        
        <div class="alignright">
          <a href="/2018/02/09/concurrency-first/#comment" class="comment-link">Comments</a>
        </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2018-02-09T07:43:11.000Z"><a href="/2018/02/09/java-basis/">2018-02-09</a></time>
        
  
    <h1 class="title"><a href="/2018/02/09/java-basis/">java static</a></h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        
    </div>

        <font color="#555" face="PingFang SC" size="4"><br>用来修饰成员变量，将其变为类的成员，从而实现所有对象对于该成员的共享；<br>用来修饰成员方法，将其变为类方法，可以直接使用“类名.方法名”的方式调用，常用于工具类；<br>静态块用法，将多个类成员放在一起初始化，使得程序更加规整，其中理解对象的初始化过程非常关键；<br>静态导包用法，将类的方法直接导入到当前类中，从而直接使用“方法名”即可调用类方法，更加方便。<br><br>static，首先要记住的最重要的一点就是，类属性中被static所引用的变量，会被作为GC的root根节点。<br>作为根节点就意味着，这一类变量是基本上不会被回收的。因此，static很容易引入内存泄漏的风险。<br>JVM只为静态分配一次内存，在加载类的过程中完成静态变量的内存分配，可用类名直接访问（方便）。<br>在静态方法里只能直接调用同类中其他的静态成员（包括变量和方法），而不能直接访问类中的非静态成员。这是因为，对于非静态的方法和变量，需要先创建类的实例对象后才可使用，而静态方法在使用前不用创建任何对象。（备注：静态变量是属于整个类的变量而不是属于某个对象的）<br>静态方法不能以任何方式引用this和super关键字，因为静态方法在使用前不用创建任何实例对象，当静态方法调用时，this所引用的对象根本没有产生。<br><br>static关键字用来表明这个行为不和任何对象绑定，比如public static void main ，这个main方法就不属于定义它的class所对应的对象。还有java里面的Math类，<br>这个类里面的方法都是public static的，说明这些方法都不属于任何对象。而java是纯面向对象的，只能把这些不属于任何具体对象的定义为static，而其对应的class类，<br>感觉给他定义了一个命名空间而已。<br><br></font>

      
    </div>
    <footer>
      
        
        
        <div class="alignright">
          <a href="/2018/02/09/java-basis/#comment" class="comment-link">Comments</a>
        </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2018-02-09T03:24:32.000Z"><a href="/2018/02/09/kj/">2018-02-09</a></time>
        
  
    <h1 class="title"><a href="/2018/02/09/kj/">框架中的知识</a></h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        
    </div>

        <font color="#555" face="PingFang SC" size="4"><br>spring和struct2<br>spring 可以在配置文件中配置bean加载时为单例还是多例<br>多例模式在程序启动时候不会加载(懒加载),当类不需要启动加载,类中的属性太多时可以启动<br>控制器controller运用单例模式,运用线程ThreadLocal(线程局部变量,保证每一个线程都有自己的变量副本),ThreadLocal为弱引用可以提高性能减少jvm压力。<br>当bean需要修改状态时为了保证线性安全需要ThreadLocal<bean>来保证线性安全。<br>spring和struct2请求方法的粗粒度不同前者基于controller后者为类，因此redirect的位置也不同。<br>单例模式通过双重加锁来保证线性安全<br>spring中的设计模式<br><a href="https://www.ibm.com/developerworks/cn/java/j-lo-spring-principle/" target="_blank" rel="noopener">https://www.ibm.com/developerworks/cn/java/j-lo-spring-principle/</a><br><br></bean></font>

      
    </div>
    <footer>
      
        
        
        <div class="alignright">
          <a href="/2018/02/09/kj/#comment" class="comment-link">Comments</a>
        </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2018-02-09T00:48:24.000Z"><a href="/2018/02/09/jvm/">2018-02-09</a></time>
        
  
    <h1 class="title"><a href="/2018/02/09/jvm/">jvm</a></h1>
  

    </header>

    <div class="entry">
      
        <font color="#555" size="4" face="微软雅黑"><br><img src="/img/default/jvm.jpg"><br>栈(stack):是一个先进后出的数据结构,通常用于保存方法(函数)中的参数,局部变量.<br>在java中,所有基本类型和引用类型都在栈中存储.栈中数据的生存空间一般在当前scopes内(就是由{…}括起来的区域).<br>堆(heap):是一个可动态申请的内存空间(其记录空闲内存空间的链表由操作系统维护),C中的malloc语句所产生的内存空间就在堆中.<br>在java中,所有使用new xxx()构造出来的对象都在堆中存储,当垃圾回收器检测到某对象未被引用,则自动销毁该对象.所以,理论上说java中对象的生存空间是没有限制的,只要有引用类型指向它,则它就可以在任意地方被使用.<br>&nbsp;&nbsp;&nbsp;&nbsp;Eden Survivor0 Survivor1 8:1:1<br>&nbsp;&nbsp;&nbsp;&nbsp;新生代和老年代 内存大小比例1:2<br>&nbsp;&nbsp;&nbsp;&nbsp;Young + old + perm构成了HotSpot VM的整个GC堆。<br>&nbsp;&nbsp;&nbsp;&nbsp;1 绝大多数刚创建的对象会被分配在Eden区，其中的大多数对象很快就会消亡。Eden区是连续的内存空间，因此在其上分配内存极快；<br>&nbsp;&nbsp;&nbsp;&nbsp;2 当Eden区满的时候，执行Minor GC，将消亡的对象清理掉，并将剩余的对象复制到一个存活区Survivor0（此时，Survivor1是空白的，两个Survivor总有一个是空白的）；<br>此后，每次Eden区满了，就执行一次Minor GC，并将剩余的对象都添加到Survivor0；<br>&nbsp;&nbsp;&nbsp;&nbsp;3 当Survivor0也满的时候，将其中仍然活着的对象直接复制到Survivor1，以后Eden区执行Minor GC后，就将剩余的对象添加Survivor1（此时，Survivor0是空白的）。两个Survivor可以保证 新进入Survivor区的 避免进入同一个Survivor 避免产生内存碎片化<br>&nbsp;&nbsp;4 当两个存活区切换了几次（HotSpot虚拟机默认15次，用-XX:MaxTenuringThreshold控制，大于该值进入老年代，但这只是个最大值，并不代表一定是这个值）之后，仍然存活的对象（其实只有一小部分，比如，我们自己定义的对象），将被复制到老年代。<br>新生代对象达到阈值会直接进入老年代 ,老年代满了会进行full gc<br>内存利用率高是为什么呢？是利用新生代存活率低不需要预留太多内存。而老年代为什么不行呢？<br>因为老年代存活率高，你回收需要预留比较大的空间。这样的话内存利用率就比较低，所以考虑到这个老年代就用标记清除或者标记整理的方法,标记清楚会产生内存碎片.<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2018/02/09/jvm/#more" class="more-link">Read More</a>
          </div>
        
        
        <div class="alignright">
          <a href="/2018/02/09/jvm/#comment" class="comment-link">Comments</a>
        </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2018-01-08T09:20:09.000Z"><a href="/2018/01/08/HashMap/">2018-01-08</a></time>
        
  
    <h1 class="title"><a href="/2018/01/08/HashMap/">hashmap</a></h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        
    </div>

        <font color="#555" face="PingFang SC" size="4"><br>    <img src="/img/default/hashmap.png"><br>    HashMap HashTable CurrentHashMap三者的区别在网上可以找到很多,<br>HashMap 核心是hashcode 比较的时候首先进行hashcode 的碰撞让后key进行eques，<a href="http://blog.csdn.net/ghsau/article/details/21328203" target="_blank" rel="noopener">hashcode的生成</a><br>个人理解HashTable通过锁来保证线性安全带来的缺点是性能低, <a href="https://yq.aliyun.com/articles/36781" target="_blank" rel="noopener">CurrentHashMap</a><br>当中CAS无锁算法思想在很多地方都有突破性作用,<br>比如早期的数据库都是进行加锁来保证事务性,现在数据库MVCC(多版本并发)思想就是通过快照方式CAS思想类似乐观锁来保证事务。<br>java的Atomic底层也是通过CAS来保证原子性。<br>CAS会产生ABA(即此A非彼A)问题通过加版本号来控制。<br><br></font>




      
    </div>
    <footer>
      
        
        
        <div class="alignright">
          <a href="/2018/01/08/HashMap/#comment" class="comment-link">Comments</a>
        </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2017-12-04T02:15:35.000Z"><a href="/2017/12/04/struggle/">2017-12-04</a></time>
        
  
    <h1 class="title"><a href="/2017/12/04/struggle/">life is a struggle</a></h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        
    </div>

        <font color="#555" face="PingFang SC" size="4"><br>    最近看了几部挺受感动的电影血战钢锯岭,摔跤吧爸爸和寻梦环游记。<br>    罗素说：只有一种英雄主义，就是在认清生活的真相后依然热爱生活。<br>    每当小罗,梅西,卡卡他们进球后双手指天感谢上帝时总是很受感动。<br>    小罗一直记得他父亲临死前对他说的话”在西方有一座金球属于你”。<br>    卡卡得到金球奖时说,当我低谷时我告诉自己这都是上帝安排的,你要一上帝会给你十。<br>    一个单纯的梦想足够指引着他们在走向伟大的路上坚定如初。<br>    人生本是一场苦难的修行。<br>    家人之间也会有许多的不理解，当生活把美好的事物撕碎了给你看时,<br>    你最后还是选择坚持的爱着,最让人害怕的不是死亡,而是忘记，<br>    把最初的信仰和分不开的家人轻放于心底,不忘初心。<br>    如果让我说出我现在即未来几年为之奋斗的目标,我想说我要进阿里。<br></font>


      
    </div>
    <footer>
      
        
        
        <div class="alignright">
          <a href="/2017/12/04/struggle/#comment" class="comment-link">Comments</a>
        </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




    <article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2017-11-30T08:05:35.000Z"><a href="/2017/11/30/Hexo/">2017-11-30</a></time>
        
  
    <h1 class="title"><a href="/2017/11/30/Hexo/">hexo</a></h1>
  

    </header>

    <div class="entry">
      
        <!--<font color=gray size=5 face="微软雅黑">-->
<font color="#555" face="PingFang SC" size="4">下载<a href="https://nodejs.org/en/" target="_blank" rel="noopener">node</a><br>     npm install -g hexo<br>     hexo init<br>     进入blog目录<br>     npm install hexo-server –save<br>     在git中 部署pubilic 文件到新仓库 每次部署删除后重新关联<br>     hexo g<br>     hexo s<br><br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2017/11/30/Hexo/#more" class="more-link">Read More</a>
          </div>
        
        
        <div class="alignright">
          <a href="/2017/11/30/Hexo/#comment" class="comment-link">Comments</a>
        </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



 
<nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav>
</div></div>
      <aside id="sidebar" class="alignright">
   


  <!--<div class="widget tag">
  <h3 class="title">微信公众账号</h3>
    <ul class="entry">
      <img src="/img/default/qrcode.jpg" alt="欢迎关注个人公众账号" style= "width: 100%">
    </ul>
</div>-->


  <!--<div class="widget tag">
  <h3 class="title">Calendar</h3>
  <div id="calendar"></div>
</div>
-->



  <!--
-->


  
<div class="widget tagcloud">
  <h3 class="title">Tag Cloud</h3>
  <div class="entry">
    <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/架构/" style="font-size: 10px;">架构</a> <a href="/tags/生活/" style="font-size: 10px;">生活</a> <a href="/tags/线程/" style="font-size: 10px;">线程</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a>
  </div>
</div>



  
  <div class="widget tag">
    <h3 class="title">归档</h3>
	<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">公元 2018 年</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">公元 2017 年</a><span class="archive-list-count">2</span></li></ul>
  </div>

</aside>
      <div class="clearfix"></div>
    </div>
  
  <footer id="footer"><div class="footer-content inner">
  <div class="align">
  
    &copy; 2018 idiot-yu
    
  </div>
 <!-- <div class="alignright">
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, Theme
    <a href="https://github.com/pengloo53/Hexo-theme-light_cn">light_cn</a>, 
    <p>Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a></p>
  </div>-->


  <div class="clearfix"></div>
</div></footer>
  <script src="http://libs.baidu.com/jquery/2.1.1/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<!-- calendar widget -->

  <script src="/js/calendar.js"></script>
  <script src="/js/languages.js"></script>
  <script type="text/javascript">
    $(function() {
    
      $('#calendar').aCalendar('zh-CN',{single:undefined, root:'calendar'});
    
    });
  </script>


<!-- 『不蒜子』计数服务 -->
<script async src="http://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!-- wumii关联推荐 -->
<script type="text/javascript" src="http://widget.wumii.cn/ext/relatedItemsWidget"></script>

<!-- 百度推荐 -->

	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "//hm.baidu.com/hm.js?9acf0cedd48dc53be256ede5a98c2aaa";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>


<!-- 返回顶部 -->
<div id="toTop">
	<a href="#">▲</a>
	<a href="#footer">▼</a>
</div>

<!-- 站内搜索-Swiftype -->
<!-- <script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
  
  _st('install','sC-iNFrvTTNtiXEVNwo1','2.0.0');
</script> -->

<!-- fancybox -->

<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>
</html>
